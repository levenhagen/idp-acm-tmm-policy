apiVersion: policy.open-cluster-management.io/v1
kind: PolicyGenerator
metadata:
  name: policy-configure-acm-users
placementBindingDefaults:
  name: acm-idp-placement-binding
policyDefaults:
  namespace: policies
  placement:
    placementPath: input/placement.yaml
  orderPolicies: true
policies:
  - name: add-idp-secret
    manifests:
      - path: input/idp-secret.yaml
    remediationAction: "enforce"
  - name: add-acm-hub-idp-provider
    manifests:
      - path: input/tmm-hub-idp.yaml
    remediationAction: "enforce"
  - name: add-acm-admin-cluster-role
    manifests:
     - path: input/tmm-hub-cluster-role.yaml
    remediationAction: "enforce"
  - name: remove-kubeadmin-password
    complianceType: "mustnothave"
    manifests:
      - path: input/remove-kubeadmin-pass.yaml
